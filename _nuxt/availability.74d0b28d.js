import{u as C,_ as P}from"./FilterStore.34eab582.js";import{C as y,p as w,_ as k,a as H}from"./Remove.4f333355.js";import{s as M,y as A,a as R,b as D,c as I,_ as N}from"./Filters.ea3b1ec5.js";import{g as S,f as $}from"./chartUtils.2ab73b6e.js";import{b,c as v}from"./WindTurbineGeneratorStore.eb0d735d.js";import{u as K}from"./ChartStore.b77e04aa.js";import{_ as p,z as B,o as n,c as l,a,r as f,b as _,x,A as T,F,s as L,u as V}from"./entry.03847b27.js";import{u as G}from"./WeatherdataStore.c8d5cae7.js";import"./Logo.cc0f74b4.js";import"./nuxt-link.891a4dd6.js";y.register(w);const O={props:{filterParams:{startHour:Number,endHour:Number,startMonth:Number,endMonth:Number,years:Number,chartId:Number}},setup(e){const t=K(),h=b();h.getSelectedPreset()!=null&&B(()=>{const u=h.getSelectedPreset(),s=u.assets;t.availData["Required Hours"]=[],t.availData["Available Hours"]=[],t.availData["Difference in Hours"]=[];for(let o=0;o<s.length;o++){M(e.filterParams.startHour,e.filterParams.endHour,e.filterParams.startMonth,e.filterParams.endMonth,e.filterParams.years,s[o]);const c=s[o],i=c.team,m=u.location,d=u.wtg,g=A(t.wdtData[c.name],e.filterParams.startMonth,e.filterParams.endMonth);t.availData["Required Hours"].push(R(d,m)),t.availData["Available Hours"].push(D(i,g,e.filterParams.startMonth,e.filterParams.endMonth)),t.availData["Difference in Hours"].push(I(i,g,m,d,e.filterParams.startMonth,e.filterParams.endMonth))}const r=[];for(const o in t.availData)r.push({label:o,data:t.availData[o],borderRadius:10});new y(document.getElementById("availChart"+e.filterParams.chartId),{type:"bar",data:{labels:S(),datasets:r},options:{maintainAspectRatio:!1,plugins:{colors:{enabled:!0},tooltip:{enabled:!0,callbacks:{label:o=>{const c=o.dataset.label,i=o.raw,m=$(i);return`${c}: ${m} hours`}}}},scales:{y:{beginAtZero:!0}}}})})}},W={class:"deck-frame-white"},q=["id"];function j(e,t,h,u,s,r){return n(),l("div",W,[a("canvas",{id:"availChart"+h.filterParams.chartId,class:"chart-canvas"},null,8,q)])}const E=p(O,[["render",j],["__scopeId","data-v-f1f8783b"]]),z={layout:"default",name:"Availability",props:{chartId:Number,amountOfCharts:Number},data(e){return{availChartKey:!1,showComponents:!0,filterParams:{startHour:f(0),endHour:f(23),startMonth:f(1),endMonth:f(12),years:f(10),chartId:e.chartId},loading:v().loading}},methods:{handleApplyChanges(e){this.filterParams.startHour=e.startHour,this.filterParams.endHour=e.endHour,this.filterParams.startMonth=e.startMonth,this.filterParams.endMonth=e.endMonth,this.filterParams.years=e.years,this.availChartKey=!this.availChartKey},emitRemove(){this.$emit("remove",this.chartId)},hideToggle(){this.showComponents=!this.showComponents}}},Z={key:0,class:"w-full flex relative"},J={class:"w-4/5 p-3"},Q={class:"flex text-lg justify-between w-full py-5"},U={class:"flex gap-1.5 items-center hover:text-gray-400 group hover:translate-y-[-3px] transition-all ease-in-out cursor-pointer"},X={key:0},Y=T('<section class="flex items-center justify-center h-full w-full"><div class="h-20 w-20 mr-10 rounded-full bg-blue-300 animate-pulse"></div><div class="h-20 w-20 mr-10 rounded-full bg-blue-300 animate-pulse"></div><div class="h-20 w-20 mr-10 rounded-full bg-blue-300 animate-pulse"></div><div class="h-20 w-20 mr-10 rounded-full bg-blue-300 animate-pulse"></div><div class="h-20 w-20 rounded-full bg-blue-300 animate-pulse"></div></section>',1),ee=[Y],te={key:1},ae={class:"w-1/5 h-full p-3"},se={class:"flex flex-row-reverse text-lg w-full py-5"},re={key:0,class:"flex gap-1.5 flex-row-reverse items-center hover:text-gray-400 group hover:translate-y-[-3px] transition-all ease-in-out cursor-pointer"},oe={key:1,class:"h-[28px]"},ne={key:1,class:"py-10"},ie={class:"flex gap-1.5 p-3 items-center hover:text-gray-400 group hover:translate-y-[-3px] transition-all ease-in-out cursor-pointer"};function le(e,t,h,u,s,r){const o=k,c=E,i=H,m=N;return s.showComponents?(n(),l("div",Z,[a("div",J,[a("div",Q,[a("div",U,[_(o,{class:"stroke-1 group-hover:text-yellow-400"}),a("p",{class:"text-decoration font-semibold",onClick:t[0]||(t[0]=(...d)=>r.hideToggle&&r.hideToggle(...d))},"Hide")])]),s.loading?(n(),l("div",X,ee)):(n(),l("div",te,[(n(),x(c,{key:s.availChartKey,filterParams:s.filterParams},null,8,["filterParams"]))]))]),a("div",ae,[a("div",se,[this.amountOfCharts>1?(n(),l("div",re,[_(i,{class:"stroke-1 group-hover:text-red-400"}),a("p",{class:"text-decoration font-semibold",onClick:t[1]||(t[1]=(...d)=>r.emitRemove&&r.emitRemove(...d))}," Remove ")])):(n(),l("div",oe))]),_(m,{onButtonClick:r.handleApplyChanges,filterProps:s.filterParams},null,8,["onButtonClick","filterProps"])])])):(n(),l("div",ne,[a("div",ie,[_(o,{class:"stroke-1 group-hover:text-yellow-400"}),a("p",{class:"text-decoration",onClick:t[2]||(t[2]=(...d)=>r.hideToggle&&r.hideToggle(...d))},"Show graph...")])]))}const ce=p(z,[["render",le]]),de={layout:"default",name:"Availability",data(){return{ids:[],chartKey:!1,loading:!0}},async mounted(){this.ids.push(1),await this.startChart(),this.toggleChartKey(),this.loading=!1},fetch(){return this.startChart()},methods:{addGraph(){this.ids.push(this.ids[this.ids.length-1]+1)},handleRemove(e){this.ids.length!==1&&(this.ids=this.ids.filter(t=>t!==e))},toggleChartKey(){this.chartKey=!this.chartKey},async startChart(){const t=b().getSelectedPreset().location;C().hideRecommendation=!1,v().toggleLoading(),this.$emit("loading"),await G().getByLocationId(t._id),v().toggleLoading(),this.$emit("loading"),this.loading=!1}}},he={class:"flex"},ue={class:"sidebar-container p-5 h-screen"},me={class:"h-full deck-frame-translucent-w-sidebar inline-block"},fe=a("div",{class:"heading-container"},[a("h1",{class:"generic-header"},"Availability")],-1),_e={class:"flex flex-col"},ve={class:"w-full p-3"};function pe(e,t,h,u,s,r){const o=P,c=ce;return n(),l("div",he,[a("div",ue,[_(o)]),a("div",me,[fe,a("div",_e,[(n(!0),l(F,null,L(s.ids,i=>(n(),l("div",{key:i},[(n(),x(c,{key:s.chartKey,onRemove:r.handleRemove,chartId:i,amountOfCharts:s.ids.length},null,8,["onRemove","chartId","amountOfCharts"]))]))),128))]),a("div",ve,[s.ids.length!==3?(n(),l("button",{key:0,type:"button",class:"w-full border-2 border-gray-400 rounded-full py-1 font-semibold text-xl text-gray-600",onClick:t[0]||(t[0]=(...i)=>r.addGraph&&r.addGraph(...i))}," Add more graphs ")):V("",!0)])])])}const Ae=p(de,[["render",pe]]);export{Ae as default};
